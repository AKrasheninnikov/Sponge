(function(n){n.shoutbox=function(t){function r(){n(n.shoutbox.settings.container).html("<div id='sponge_shoutbox_box'/><input name='sponge_shoutbox_usrmsg' type='text' id='sponge_shoutbox_usrmsg' class='sponge_shoutbox_usrmsg' /><button type='button' name='sponge_shoutbox_submit' id='sponge_shoutbox_submit' class='sponge_shoutbox_submit'>Send<\/button>")}function u(){n("#sponge_shoutbox_submit").click(function(){var r=n("#sponge_shoutbox_usrmsg").val(),t=SP.ClientContext.get_current(),u=t.get_web().get_lists().getByTitle(n.shoutbox.settings.list),f=new SP.ListItemCreationInformation;this.spongeShoutboxItem=u.addItem(f),this.spongeShoutboxItem.set_item("Message",r),this.spongeShoutboxItem.update(),t.load(this.spongeShoutboxItem),t.executeQueryAsync(Function.createDelegate(this,function(){SP.UI.Notify.addNotification("Your message has been posted.",!1),n("#sponge_shoutbox_usrmsg").val(""),i()}),Function.createDelegate(this,function(n,t){alert("Request failed. "+t.get_message()+"\n"+t.get_stackTrace())}))})}function i(){var r;n("#sponge_shoutbox_box").html("");var t=SP.ClientContext.get_current(),u=t.get_web().get_lists().getByTitle(n.shoutbox.settings.list),i=new SP.CamlQuery;i.set_viewXml("<View><Query><OrderBy><FieldRef Name='ID' Ascending='FALSE'/><\/OrderBy><Where><Geq><FieldRef Name='ID'/>' + '<Value Type='Number'>0<\/Value><\/Geq><\/Where><\/Query><RowLimit>"+n.shoutbox.settings.rowLimit+"<\/RowLimit><\/View>"),this.spongeShoutboxItems=u.getItems(i),t.load(this.spongeShoutboxItems),r=this.spongeShoutboxItems,t.executeQueryAsync(Function.createDelegate(this,function(){for(var t=r.getEnumerator(),i,u;t.moveNext();)i=t.get_current(),u=o(i),n("#sponge_shoutbox_box").append(u)}),Function.createDelegate(this,function(n,t){alert("Request failed. "+t.get_message()+"\n"+t.get_stackTrace())}))}function f(){n.shoutbox.settings.autoReload!="undefined"&&n.shoutbox.settings.autoReload>0&&setInterval(i,n.shoutbox.settings.autoReload)}function e(n){var t=document.createElement("DIV");return t.innerHTML=n,t.textContent||t.innerText||""}function o(n){var t=e(n.get_item("Message")),i=n.get_item("Author").get_lookupValue(),r=new Date(n.get_item("Created"));return"<li id='sponge_shoutbox_entry'><div id='sponge_shoutbox_msg'>"+t+"<\/div><div id='sponge_shoutbox_meta'>"+i+"  -  "+r.toLocaleString()+"<\/div><\/li>"}n.shoutbox.settings=n.extend({list:"",container:"",autoReload:0,rowLimit:10},t||{}),r(),u(),i(),f()}})(jQuery);
//@ sourceMappingURL=sponge.shoutbox-1.0.min.js.map